# üõ∞Ô∏è GPS Tracker Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π GPS-—Ç—Ä–µ–∫–µ—Ä–∞ AK-39B —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì± –ö–Ω–æ–ø–æ—á–Ω–æ–µ –º–µ–Ω—é —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- üñºÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ (–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ)
- ‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∑–∞—â–∏—Ç–æ–π –ø–∞—Ä–æ–ª–µ–º
- üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤, –º–µ–¥–∏–∞ –∏ –∫–Ω–æ–ø–æ–∫
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤
- üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON (–ª–µ–≥–∫–æ –±—ç–∫–∞–ø–∏—Ç—å)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python
sudo apt install python3 python3-pip python3-venv -y
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "GPS Tracker Support")
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `gps_tracker_support_bot`)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

```bash
# –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p /opt/gps_tracker_bot
cd /opt/gps_tracker_bot

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã (–∏–ª–∏ –∫–æ–ø–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ SFTP)
# bot.py, content.json, config.json, requirements.txt

# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.json`:

```json
{
  "bot_token": "–í–°–¢–ê–í–¨–¢–ï_–¢–û–ö–ï–ù_–û–¢_BOTFATHER",
  "admin_password": "–≤–∞—à_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å"
}
```

### 5. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
python bot.py
```

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –±–æ—Ç –Ω–∞–ø–∏—à–µ—Ç `üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!`

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (systemd)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo nano /etc/systemd/system/gps-tracker-bot.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```ini
[Unit]
Description=GPS Tracker Telegram Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/gps_tracker_bot
Environment=PATH=/opt/gps_tracker_bot/venv/bin
ExecStart=/opt/gps_tracker_bot/venv/bin/python bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä—É–µ–º:

```bash
sudo systemctl daemon-reload
sudo systemctl enable gps-tracker-bot
sudo systemctl start gps-tracker-bot
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å:

```bash
sudo systemctl status gps-tracker-bot
```

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

- `/start` –∏–ª–∏ `/menu` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–Ω–æ–ø–∫–∞–º

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/admin`
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin123`)
3. –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ:
   - **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç** ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç, –º–µ–¥–∏–∞, –∫–Ω–æ–ø–∫–∏
   - **–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª** ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª
   - **–£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª** ‚Äî —É–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª
   - **–°–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤** ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ ID —Ä–∞–∑–¥–µ–ª–æ–≤
   - **–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å** ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∫–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞

1. `/admin` ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç ‚Üí –í—ã–±—Ä–∞—Ç—å —Ä–∞–∑–¥–µ–ª ‚Üí –ú–µ–¥–∏–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ
3. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç `file_id` –∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ú–µ–¥–∏–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Telegram –ø–æ `file_id`. –ü—Ä–∏ —Å–º–µ–Ω–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞ –º–µ–¥–∏–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ.

### –§–æ—Ä–º–∞—Ç –∫–Ω–æ–ø–æ–∫

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–Ω–æ–ø–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç:
```
–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ | callback_id
```

–ü—Ä–∏–º–µ—Ä:
```
üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è | section_instruction
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/opt/gps_tracker_bot/
‚îú‚îÄ‚îÄ bot.py           # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.json      # –¢–æ–∫–µ–Ω –∏ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∫–∏
‚îú‚îÄ‚îÄ content.json     # –í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –±–æ—Ç–∞ (—Ç–µ–∫—Å—Ç—ã, –∫–Ω–æ–ø–∫–∏, –º–µ–¥–∏–∞)
‚îú‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ venv/            # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
```

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ content.json

–ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "section_id": {
    "text": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å <b>HTML-—Ä–∞–∑–º–µ—Ç–∫–æ–π</b>",
    "buttons": [
      {"text": "üì± –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏", "callback": "–¥—Ä—É–≥–æ–π_section_id"}
    ],
    "back": "—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π_section_id",
    "media": {
      "type": "photo",
      "file_id": "AgACAgIAAxkB..."
    }
  }
}
```

### –ü–æ–ª—è:
- `text` ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è HTML: `<b>`, `<i>`, `<code>`, `<a href="">`)
- `buttons` ‚Äî –º–∞—Å—Å–∏–≤ –∫–Ω–æ–ø–æ–∫ (text + callback)
- `back` ‚Äî ID —Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è)
- `media` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl restart gps-tracker-bot

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sudo journalctl -u gps-tracker-bot -f

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
sudo systemctl stop gps-tracker-bot

# –ë—ç–∫–∞–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
cp /opt/gps_tracker_bot/content.json ~/backup_content_$(date +%Y%m%d).json
```

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status gps-tracker-bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo journalctl -u gps-tracker-bot --no-pager -n 50
```

### –û—à–∏–±–∫–∞ "Conflict: terminated by other getUpdates"
–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–ø–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–Ω—É.

### –ú–µ–¥–∏–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `file_id` —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ `content.json`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–µ–¥–∏–∞ –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.
